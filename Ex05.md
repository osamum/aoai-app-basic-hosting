# 演習 5 : サービスの閉域化

Microsoft Azure のほとんどのサービスは、パブリック クラウドのサービスという性質上、デプロイされたサービスのエンドポイントは既定でインターネットに公開されます。

しかし、サービスのエンドポイントをインターネットに公開せず、クローズドなネットワーク環境からのみアクセスしたいという場合もあります。たとえば、リクエストの入り口にはロードバランサーやファイヤーウォールを配置し、バックエンド部分はインターネットに公開しないといった場合もあります。

このような場合には Azure Virtual Network (仮想ネットワーク)環境を作成し、これに対し、目的の Azure リソースで [Azure Private Link](https://learn.microsoft.com/ja-jp/azure/private-link/private-link-overview) 機能を使用してプライベート エンドポイントを公開し、かつネットワークの設定でパブリック アクセスを無効にすることで、インターネットに公開しないようにすることができます。

また、パブリックなネットワーク上のアプリケーションからクローズドなネットワーク環境内のリソースにアクセスしたいという場合もあります。たとえば、App Service 上のアプリケーションから Azure Virtual Network 内の仮想マシンにアクセスしたいといった場合です。

このような場合には、App Service の [仮想ネットワーク統合](https://learn.microsoft.com/ja-jp/azure/app-service/overview-vnet-integration) 機能を使用して、App Service と Azure Virtual Network を接続することができます。

この演習では、Azure Virtual Network (仮想ネットワーク) 環境を作成し、Azure OpenAI サービスと Azure AI Search サービスに対してプライベート エンドポイントを作成し、インターネットに公開されないようにします。また、App Service と 同 Azure Virtual Network を接続し、App Service 上のアプリケーションから Azure OpenAI サービスと Azure AI Search サービスにアクセスできるようにします。

なお、この演習で構築した環境では、Azure OpeAI サービスと、Azure AI Search サービス(と、App Servce)はデプロイされているリージョンが異なるため単一の仮想ネットワークに接続することができません。そのため、リージョン別に仮想ネットワークを作成し、その後、VNet ピアリングで接続します。

上記を踏まえ、この演習では以下の手順を実施します。

1. [OpenAI サービスの閉域化設定](Ex05-1.md)
2. [AI Search サービスの閉域化設定](Ex05-2.md)
3. [App Service からの閉域化されたサービスへのアクセス](Ex05-3.md)

<br>

## 次へ

👉　[**演習 5-1 : OpenAI サービスの閉域化設定**](Ex05-1.md)

---

👈　[演習 3-3-3 : Application Insights 使用したアプリケーションの監視](Ex03-3-3.md)

🏚️　[README に戻る](README.md)
