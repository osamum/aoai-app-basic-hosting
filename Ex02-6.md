# 演習 2-6 : 高度なログ監視

[演習 2-2 : App Service ログの設定と有効化](Ex02-2.md)では、一般的な Web サーバーで取得可能なログを Azure App Service で取得する手順について紹介しましたが、Azure 環境では監視ソリューションである [Azure Monitor](https://learn.microsoft.com/ja-jp/azure/azure-monitor/fundamentals/overview) やログ分析ソリューションである [Azure Log Analytics](https://learn.microsoft.com/ja-jp/azure/azure-monitor/logs/log-analytics-overview) の機能を使用して複数のサービスの実行状況を監視するためのログを取得することができます。

このタスクでは、[メトリック](https://learn.microsoft.com/ja-jp/azure/app-service/web-sites-monitor#understand-metrics)を使用した状態の監視と Log Analytics を使用して Azure Monitor が取得したログをクエリーし、必要な情報を取得する方法、また、[Application Insights](https://learn.microsoft.com/ja-jp/azure/azure-monitor/app/app-insights-overview) の[自動インストルメンテーション](https://learn.microsoft.com/ja-jp/azure/azure-monitor/app/codeless-overview)のアプリケーション監視の機能について確認します。

**👁️ Azure の監視ソリューションについて**

この演習で使用する メトリック、Log Analytics、Application Insights はいずれも Azure Monitor の機能です。Azure Monitor はクラウド環境、オンプレミス環境問わず監視データを収集し、分析し、それに対応するための包括的な監視ソリューションであり、Azure におけるアプリケーションを監視するサービスの基盤となっています。Azure Monitor は、アプリケーションのパフォーマンスを把握し、アプリケーションに影響を与える問題と、アプリケーションが依存するリソースを事前に特定するのに役立ちます。

その他の監視ソリューションとして [**Azure Service Health**](https://learn.microsoft.com/ja-jp/azure/service-health/overview) があります。
Azure Service Health は、停止や計画メンテナンスなどの Azure サービスの問題が影響を受けた場合に、常に情報を入手し、アクションを実行するのに役立ちます。つまり、ホストしているアプリケーションではなく、Azure サービスそのものに対しての監視を行うことができます。


この 2 つの監視サービスの役割と違いについての詳細は以下のドキュメントをご参照ください。

* [**What’s the difference between Azure Monitor and Azure Service Health?**](https://azure.microsoft.com/en-us/blog/what-s-the-difference-between-azure-monitor-and-azure-service-health/)

**📈 メトリックとログについて**

Azure Monitor の**メトリック**と**ログ**は、システムの監視に使用される 2 つの主要なデータタイプですが、それぞれ異なる目的と特性を持っています。

**メトリック**は、数値で表されるパフォーマンスデータ（例えば、CPU使用率やメモリ使用量など）を時系列データベースに収集する機能で、一定の間隔で収集されます。これらのデータは、システムの特定の時点での状態を示し、グラフを表示して確認することができます⁵。

一方、**ログ**は、システム内で発生するあらゆるイベントを記録したもので、詳細な説明のテキストが付加されます。ログは、特定のイベントや問題についてより詳細な情報を提供し、複雑な分析に適しています。また、ログは定期的には収集されず、データの構造もメトリックとは異なります。

したがって、メトリックはシステムの全体的なパフォーマンスを把握するために使用され、ログは特定の問題やイベントを詳細に分析するために使用されます。また、メトリックとログはそれぞれ異なるデータソースから収集され、異なる方法で分析されます。

Azure Monitor が提供するメトリックとログについての詳細はそれぞれ以下のドキュメントをご参照ください。

* [**Azure Monitor のメトリックの概要**](https://learn.microsoft.com/ja-jp/azure/azure-monitor/essentials/data-platform-metrics)

* [**Azure Monitor のログの概要**](https://learn.microsoft.com/ja-jp/azure/azure-monitor/logs/data-platform-logs)

<br>

## 次へ

👉　[**演習 2-6-1 : メトリック アラートの設定**](Ex02-6-1.md)

---

👈　[演習 2-5-3 : スケールアップの設定](Ex02-5-3.md)

🏚️　[README に戻る](README.md)

